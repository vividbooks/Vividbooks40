import{l as w}from"./index-CmvfOzmY.js";async function S(c,a={}){const{frame:o="first",width:d=400,height:y,quality:p=.92,format:h="png"}=a;return new Promise((m,s)=>{const t=document.createElement("div");t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.style.visibility="hidden",document.body.appendChild(t);const v=c.w||400,l=(c.h||400)/v,n=d,i=y||Math.round(d*l);t.style.width="".concat(n,"px"),t.style.height="".concat(i,"px");let e=null;try{e=w.loadAnimation({container:t,renderer:"svg",loop:!1,autoplay:!1,animationData:c}),e.addEventListener("DOMLoaded",()=>{try{const r=e.totalFrames;let f;o==="first"?f=0:o==="middle"?f=Math.floor(r/2):o==="last"?f=r-1:f=Math.min(Math.max(0,o),r-1),e.goToAndStop(f,!0),setTimeout(()=>{try{const u=t.querySelector("svg");if(!u)throw new Error("SVG element not found");L(u,n,i,h,p).then(m).catch(s).finally(()=>{e&&e.destroy(),document.body.removeChild(t)})}catch(u){s(u)}},100)}catch(r){s(r)}}),e.addEventListener("error",()=>{s(new Error("Lottie animation failed to load"))})}catch(r){e&&e.destroy(),document.body.removeChild(t),s(r)}})}async function L(c,a,o,d,y){return new Promise((p,h)=>{const m=c.cloneNode(!0);m.setAttribute("width",String(a)),m.setAttribute("height",String(o));const t=new XMLSerializer().serializeToString(m),v=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),g=URL.createObjectURL(v),l=new Image;l.onload=()=>{try{const n=document.createElement("canvas");n.width=a,n.height=o;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");d==="jpeg"&&(i.fillStyle="#ffffff",i.fillRect(0,0,a,o)),i.drawImage(l,0,0,a,o);const e=d==="png"?"image/png":"image/jpeg",r=n.toDataURL(e,y);URL.revokeObjectURL(g),p(r)}catch(n){URL.revokeObjectURL(g),h(n)}},l.onerror=()=>{URL.revokeObjectURL(g),h(new Error("Failed to load SVG as image"))},l.src=g})}export{S as generateScreenshotFromData};
